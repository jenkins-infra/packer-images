//!/usr/bin/env groovy
//default node for pipeline and stages except for the amd/intel builds
String nodeLabel="linux-arm64-docker"

timeout(time: 120, unit: 'MINUTES') {
  // main script block
  node(nodeLabel) {
    String testingvariable = "VALUEOFTESTINGVARIABLE"
    stage('TESTING') {
      withCredentials([
        string(
            credentialsId: 'packer-aws-access-key-id',
            variable: 'AWS_ACCESS_KEY_ID'
        )
      ]) {
        withEnv([
          "TESTINGVARIABLE = $testingvariable"
        ]){
          echo 'testing echo testingvariable $testingvariable and environement value "${TESTINGVARIABLE}" done echo'
          sh 'echo testing sh output $testingvariable and environement value "${TESTINGVARIABLE}" done sh'
        }
      }
    }
  }
}
